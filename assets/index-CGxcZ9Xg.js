(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(t){if(t.ep)return;t.ep=!0;const i=o(t);fetch(t.href,i)}})();const u="/rickandmorty/assets/portal-D7tX3Tn0.png";function f(){const e=document.createElement("img");e.className="background-image",e.src=u;const n=document.createElement("div");return n.className="background-image-container",n.appendChild(e),n}const h="https://rickandmortyapi.com/api/";async function g(e){return l("character",e)}async function C(e){return l("location",e)}async function y(e){return l("episode",e)}async function l(e,n){const o=await fetch(`${h}${e}?page=${n}`,{headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch data");return o.json()}function E(e){const n=window.location.hash||"#",[o,a]=n.split("?"),t=new URLSearchParams(a??"");t.set("page",String(e));const i=`${o}?${t.toString()}`;window.location.hash=i}function v(){const n=window.location.hash.split("?")[1]??"",a=new URLSearchParams(n).get("page");return a?Number(a):1}function m(){const e=window.location.hash;return e.includes("locations")?"locations":e.includes("episodes")?"episodes":"characters"}function x(e){const n=document.createElement("button");if(n.className="card rick-and-morty-text","image"in e){const a=new Image;a.src=e.image,a.alt=e.name,a.className="card-image",n.appendChild(a)}const o=document.createElement("h2");if(o.textContent=e.name,n.appendChild(o),"episode"in e&&typeof e.episode=="string"){const a=document.createElement("span");a.textContent=e.episode,a.className="entity-episode",n.appendChild(a)}return n.addEventListener("click",a=>{const t=new CustomEvent("entityCardClick",{detail:{data:e,position:{x:a.clientX,y:a.clientY}}});window.dispatchEvent(t)}),n}function w(){let e=!1;const n=document.createElement("div");n.className="modal-background hidden";const o=document.createElement("div");o.className="modal-content",n.appendChild(o);function a(){n.classList.add("hidden"),n.innerHTML=""}function t(i,s){n.appendChild(L(s));const c=b(i);n.appendChild(c),setTimeout(()=>N(c,s),500)}return n.addEventListener("click",i=>{i.target===n&&(a(),e=!1)}),window.addEventListener("keydown",i=>{i.key==="Escape"&&e&&(a(),e=!1)}),window.addEventListener("entityCardClick",i=>{if(e)return;e=!0;const{data:s,position:c}=i.detail;n.classList.remove("hidden"),t(s,c)}),n}function L(e){const n=document.createElement("div");n.className="modal-portal-container-position",n.style.transform=`translate(${e.x-50}px, ${e.y-50}px)`;const o=document.createElement("div");o.className="modal-portal-container-scale";const a=document.createElement("div");return a.className="modal-portal",o.appendChild(a),n.appendChild(o),setTimeout(()=>n.remove(),1500),n}function b(e){const n=document.createElement("div");n.className="modal-container";const o=document.createElement("div");if(o.className="modal","image"in e){const t=new Image;t.src=e.image,t.alt=e.name,t.className="modal-image",o.appendChild(t)}const a=document.createElement("h1");if(a.textContent=e.name,a.className="rick-and-morty-text",o.appendChild(a),"species"in e){const t=document.createElement("p");t.textContent="Species: "+e.species,o.appendChild(t)}if("gender"in e){const t=document.createElement("p");t.textContent="Gender: "+e.gender,o.appendChild(t)}if("origin"in e){const t=document.createElement("p");t.textContent="Origin: "+e.origin.name,o.appendChild(t)}if("status"in e){const t=document.createElement("p");t.textContent="Status: "+e.status,o.appendChild(t)}if("location"in e){const t=document.createElement("p");t.textContent="Location: "+e.location.name,o.appendChild(t)}if("episode"in e&&typeof e.episode=="string"){const t=document.createElement("span");t.textContent=e.episode,t.className="modal-episode",o.appendChild(t)}if("air_date"in e){const t=document.createElement("span");t.textContent="Air date: "+e.air_date,t.className="modal-air-date",o.appendChild(t)}if("type"in e){const t=document.createElement("p");t.textContent="Type: "+(e.type||"Unknown"),o.appendChild(t)}if("dimension"in e){const t=document.createElement("p");t.textContent="Dimension: "+e.dimension,o.appendChild(t)}return n.appendChild(o),n}function N(e,n){const o=e.getBoundingClientRect(),a=n.x-o.left,t=n.y-o.top;e.style.transformOrigin=`${a}px ${t}px`,e.style.transition="none",e.style.transform="scale(0)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.style.transition="transform 0.4s ease-in-out",e.style.transform="scale(1)",e.style.opacity="1"})})}function P(e,n,o){const a=document.createElement("div");a.className="pagination";const t=document.createElement("button");t.className="pagination-button prev-button",t.textContent="Previous",t.disabled=e<=1;const i=document.createElement("span");i.textContent=e.toString();const s=document.createElement("button");s.className="pagination-button next-button",s.textContent="Next",s.disabled=e>=n;function c(r){let d=e;r==="next"?d=Math.min(n,e+1):r==="prev"&&(d=Math.max(1,e-1)),d!==e&&(E(d),o())}return t.addEventListener("click",()=>c("prev")),s.addEventListener("click",()=>c("next")),a.appendChild(t),a.appendChild(i),a.appendChild(s),a}function S(e){const n=m(),o=document.createElement("div");o.className="tabs";const a=document.createElement("button");a.textContent="Characters",a.id="characters",n==="characters"&&a.classList.add("active"),o.appendChild(a);const t=document.createElement("button");t.textContent="Locations",t.id="locations",n==="locations"&&t.classList.add("active"),o.appendChild(t);const i=document.createElement("button");return i.textContent="Episodes",i.id="episodes",n==="episodes"&&i.classList.add("active"),o.appendChild(i),o.addEventListener("click",s=>{const c=s.target;if(c.tagName!=="BUTTON"||c.classList.contains("active"))return;const r=o.querySelector(".active");r&&r.classList.remove("active"),c.classList.add("active"),window.location.hash=`#/${c.id}`,e()}),o}function k(e){const n=document.createElement("div");return n.className="error-message",n.textContent="An error occurred, could not load "+e,n}function M(){const e=document.createElement("div");e.className="main-body";const n=document.createElement("div");n.className="main-body-wrapper";const o=document.createElement("div");o.className="cards-grid";async function a(){n.classList.add("loading");const t=m(),i=v();try{const s=await T(t,i),c=s.results,r=s.info.pages;o.innerHTML="",c?.forEach(d=>o.appendChild(x(d))),document.querySelector(".pagination")?.remove(),e.appendChild(P(i,r,a))}catch{o.innerHTML="",o.appendChild(k(t))}n.classList.remove("loading")}return a(),e.appendChild(S(a)),e.appendChild(o),e.appendChild(w()),n.appendChild(e),n}async function T(e,n){return e==="locations"?C(n):e==="episodes"?y(n):g(n)}const p=document.querySelector("#app");p.appendChild(f());p.appendChild(M());
