(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();const u="/assets/portal-D7tX3Tn0.png";function f(){const e=document.createElement("img");e.className="background-image",e.src=u;const n=document.createElement("div");return n.className="background-image-container",n.appendChild(e),n}const h="https://rickandmortyapi.com/api/";async function g(e){return l("character",e)}async function C(e){return l("location",e)}async function E(e){return l("episode",e)}async function l(e,n){const o=await fetch(`${h}${e}?page=${n}`,{headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Failed to fetch data");return o.json()}function y(e){const n=window.location.hash||"#",[o,i]=n.split("?"),t=new URLSearchParams(i??"");t.set("page",String(e));const a=`${o}?${t.toString()}`;window.location.hash=a}function v(){const n=window.location.hash.split("?")[1]??"",i=new URLSearchParams(n).get("page");return i?Number(i):1}function p(){const e=window.location.hash;return e.includes("locations")?"locations":e.includes("episodes")?"episodes":"characters"}function w(e){const n=document.createElement("button");if(n.className="card","image"in e){const i=new Image;i.src=e.image,i.alt=e.name,i.className="card-image",n.appendChild(i)}const o=document.createElement("h2");if(o.textContent=e.name,n.appendChild(o),"episode"in e&&typeof e.episode=="string"){const i=document.createElement("span");i.textContent=e.episode,i.className="entity-episode",n.appendChild(i)}return n.addEventListener("click",i=>{const t=new CustomEvent("entityCardClick",{detail:{data:e,position:{x:i.clientX,y:i.clientY}}});window.dispatchEvent(t)}),n}function x(){let e=!1;const n=document.createElement("div");n.className="modal-background hidden";const o=document.createElement("div");o.className="modal-content",n.appendChild(o);function i(){n.classList.add("hidden"),n.innerHTML=""}function t(a,s){n.appendChild(L(s));const c=b(a);n.appendChild(c),setTimeout(()=>N(c,s),500)}return n.addEventListener("click",a=>{a.target===n&&(i(),e=!1)}),window.addEventListener("keydown",a=>{a.key==="Escape"&&e&&(i(),e=!1)}),window.addEventListener("entityCardClick",a=>{if(e)return;e=!0;const{data:s,position:c}=a.detail;n.classList.remove("hidden"),t(s,c)}),n}function L(e){const n=document.createElement("div");n.className="modal-portal-container-position",n.style.transform=`translate(${e.x-50}px, ${e.y-50}px)`;const o=document.createElement("div");o.className="modal-portal-container-scale";const i=document.createElement("div");return i.className="modal-portal",o.appendChild(i),n.appendChild(o),setTimeout(()=>n.remove(),1500),n}function b(e){const n=document.createElement("div");n.className="modal-container";const o=document.createElement("div");if(o.className="modal","image"in e){const t=new Image;t.src=e.image,t.alt=e.name,t.className="modal-image",o.appendChild(t)}const i=document.createElement("h1");if(i.textContent=e.name,o.appendChild(i),"species"in e){const t=document.createElement("p");t.textContent="Species: "+e.species,o.appendChild(t)}if("gender"in e){const t=document.createElement("p");t.textContent="Gender: "+e.gender,o.appendChild(t)}if("origin"in e){const t=document.createElement("p");t.textContent="Origin: "+e.origin.name,o.appendChild(t)}if("status"in e){const t=document.createElement("p");t.textContent="Status: "+e.status,o.appendChild(t)}if("location"in e){const t=document.createElement("p");t.textContent="Location: "+e.location.name,o.appendChild(t)}if("episode"in e&&typeof e.episode=="string"){const t=document.createElement("span");t.textContent=e.episode,t.className="modal-episode",o.appendChild(t)}if("air_date"in e){const t=document.createElement("span");t.textContent="Air date: "+e.air_date,t.className="modal-air-date",o.appendChild(t)}if("type"in e){const t=document.createElement("p");t.textContent="Type: "+(e.type||"Unknown"),o.appendChild(t)}if("dimension"in e){const t=document.createElement("p");t.textContent="Dimension: "+e.dimension,o.appendChild(t)}return n.appendChild(o),n}function N(e,n){const o=e.getBoundingClientRect(),i=n.x-o.left,t=n.y-o.top;e.style.transformOrigin=`${i}px ${t}px`,e.style.transition="none",e.style.transform="scale(0)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.style.transition="transform 0.4s ease-in-out",e.style.transform="scale(1)",e.style.opacity="1"})})}function P(e,n,o){const i=document.createElement("div");i.className="pagination";const t=document.createElement("button");t.className="pagination-button prev-button",t.textContent="Previous",t.disabled=e<=1;const a=document.createElement("span");a.textContent=e.toString();const s=document.createElement("button");s.className="pagination-button next-button",s.textContent="Next",s.disabled=e>=n;function c(r){let d=e;r==="next"?d=Math.min(n,e+1):r==="prev"&&(d=Math.max(1,e-1)),d!==e&&(y(d),o())}return t.addEventListener("click",()=>c("prev")),s.addEventListener("click",()=>c("next")),i.appendChild(t),i.appendChild(a),i.appendChild(s),i}function S(e){const n=p(),o=document.createElement("div");o.className="tabs";const i=document.createElement("button");i.textContent="Characters",i.id="characters",n==="characters"&&i.classList.add("active"),o.appendChild(i);const t=document.createElement("button");t.textContent="Locations",t.id="locations",n==="locations"&&t.classList.add("active"),o.appendChild(t);const a=document.createElement("button");return a.textContent="Episodes",a.id="episodes",n==="episodes"&&a.classList.add("active"),o.appendChild(a),o.addEventListener("click",s=>{const c=s.target;if(c.tagName!=="BUTTON"||c.classList.contains("active"))return;const r=o.querySelector(".active");r&&r.classList.remove("active"),c.classList.add("active"),window.location.hash=`#/${c.id}`,e()}),o}function M(e){const n=document.createElement("div");return n.className="error-message",n.textContent="An error occurred, could not load "+e,n}function T(){const e=document.createElement("div");e.className="main-body loading";const n=document.createElement("div");n.className="cards-grid";async function o(){e.classList.add("loading");const i=p(),t=v();try{const a=await k(i,t),s=a.results,c=a.info.pages;n.innerHTML="",s?.forEach(r=>n.appendChild(w(r))),document.querySelector(".pagination")?.remove(),e.appendChild(P(t,c,o))}catch{n.innerHTML="",n.appendChild(M(i))}e.classList.remove("loading")}return o(),e.appendChild(S(o)),e.appendChild(n),e.appendChild(x()),e}async function k(e,n){let o;return e==="locations"?o=await C(n):e==="episodes"?o=await E(n):o=await g(n),o}const m=document.querySelector("#app");m.appendChild(f());m.appendChild(T());
